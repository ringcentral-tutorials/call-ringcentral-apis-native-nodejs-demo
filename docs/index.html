<!DOCTYPE html><html><head><title>Access RingCentral platform services using Node JS.- RingCentral Developer Tutorials</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="72x72" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="114x114" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/jquery-ui@1.12.1/themes/base/all.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div class="dpw-header-container"><div class="dpw-header center-section"><div class="logo"><a href="https://developers.ringcentral.com" class="logo-link"></a></div><div class="nav-top-menus"></div><div class="dpw-login-section"><a href="https://developer.ringcentral.com/login.html#/">Sign in | Sign up</a></div></div></div><div id="viewsaurus" data-title="Access RingCentral platform services using Node JS."><div class="saurus-panes"><div class="saurus-panes-header"><a href="https://ringcentral.github.io/tutorials/" class="saurus-back-to-tutorials">Tutorials</a><span>&gt;</span><span>Access RingCentral platform services using Node JS.</span></div><div class="saurus-prose"><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw icon-menu"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>In this step-by-step tutorial, you are going to learn how to authenticate and access RingCentral platform services using Node JS. Click the &quot;Start&quot; button below to start the tutorial.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Access RingCentral platform services using Node JS" class="chapter"><div data-title="Clone and Setup the project" data-file="../README.md" data-highlight="10-18" class="step"><h3 id="clone-and-setup-the-project">Clone and Setup the project</h3>
<p>Clone the project from GitHub and install the <code>dotenv</code> module.</p>
</div><div data-title="Create a RingCentral app" data-file="../README.md" data-highlight="24-27" class="step"><h3>Create a RingCentral app</h3><p>If you don't know how to create a RingCentral app. Click <a href="https://developer.ringcentral.com/library/getting-started.html">here</a> for instructions.</p></div><div data-title="Set Environment Variables" data-file="../environment/dotenv-sandbox" class="step"><h3 id="set-environment-variables">Set Environment Variables</h3>
<p>Copy the Client id and Client secret and add them to the <code>.env-sandbox</code> file.</p>
<pre><code>RC_CLIENT_ID=
RC_CLIENT_SECRET=
</code></pre><p>Add the account login credentials to the <code>.env-sandbox</code> file.</p>
<pre><code>RC_USERNAME=
RC_PASSWORD=
RC_EXTENSION=
</code></pre><p>If you want to specify variables for your production environment, repeat this step for the <code>.env-production</code> file.</p>
</div><div data-title="Getting started" data-file="../ringcentral.js" data-highlight="1-4" class="step"><h3 id="getting-started">Getting started</h3>
<p>Let&#39;s start by creating a file named <code>ringcentral.js</code> and import a few required libraries.</p>
</div><div data-title="Load the environment variables" data-file="../ringcentral.js" data-highlight="6-12" class="step"><h3 id="load-the-environment-variables">Load the environment variables</h3>
<p>Read the ENVIRONMENT value from the <code>.env</code> file and load the <code>.env-sandbox</code> or <code>.env-production</code> accordingly.</p>
<h3 id="specify-a-txt-file-to-keep-the-authentication-data">Specify a .txt file to keep the authentication data</h3>
<p>For the sandbox environment, we save the data to the <code>tokens_sb.txt</code>.</p>
<p>For the production environment, we save the data to the <code>tokens_pd.txt</code>.</p>
<p>In your real application, you may want to keep the authentication data in a database. Or keep the file in a hidden place because it contains the access token and the refresh token!</p>
</div><div data-title="Create a reusable class" data-file="../ringcentral.js" data-highlight="14-15" class="step"><h3 id="create-a-reusable-class">Create a reusable class</h3>
<p>To make this tutorial code reusable and extensible, we define the <code>RingCentral</code> class and implement a few utility functions.</p>
<pre><code>authenticate()
get()
post()
</code></pre></div><div data-title="Implement authentication - 1" data-file="../ringcentral.js" data-highlight="18-32" class="step"><h3 id="implement-authentication-1">Implement authentication - 1</h3>
<p>Let&#39;s implement the <code>authenticate()</code> function to handle platform authentication.</p>
<p>1) Specify the <code>endpoint</code>, and the <code>url</code> variable by reading the platform server URL we defined in the configuration .env-[environment] file.</p>
<p>2) Specify the <code>basic</code> authorization string by joining the client Id with the client secret separated by a colon &quot;:&quot;.</p>
<p>3/ Define the <code>headers</code> variable with the <code>Content-Type</code>, <code>Accept</code> and <code>Authorization</code> for the basic auth scheme.</p>
<p>4/ Define the <code>body</code> object with the <code>grant_type</code>, <code>username</code> and <code>password</code>. We encode the &#39;username&#39;  value for just in case if the username is an email address which has special characters.</p>
<p>5) Define the <code>options</code> object and specify values for the <code>host</code>, <code>path</code>, <code>method</code> and the <code>headers</code>.</p>
</div><div data-title="Implement authentication - 2" data-file="../ringcentral.js" data-highlight="53-78" class="step"><h3 id="implement-authentication-2">Implement authentication - 2</h3>
<p>1) Call the <code>https.request</code> and passing along the <code>options</code> object we created in the previous step.</p>
<p>2) Read the response and check the <code>status_code</code>. If the <code>status_code</code> is 200, load it into a JSON object <code>jsonObj</code>.</p>
<p>3) Define a <code>tokensObj</code> variable and assign the <code>jsonObj</code> to the &quot;tokens&quot; key/value pair. We also create the current timestamp and assign it to the &quot;timestamp&quot; key/value pair.</p>
<p>4) Save the <code>tokensObj</code> into a local file. I will discuss about how to use the file in the next step.</p>
<p>5) Return the <code>jsonObj.access_token</code>.</p>
</div><div data-title="Implement authentication - 3" data-file="../ringcentral.js" data-highlight="34-51" class="step"><h3 id="implement-authentication-3">Implement authentication - 3</h3>
<p>We can avoid posting an authentication request every time we need access to the platform by checking if the <code>access_token</code> is still valid.</p>
<p>To do that, we check the existence of the <code>tokens_file</code> file.</p>
<p>If the file exists, we read the file content and specify the <code>expire_time</code> variable by subtracting the <code>tokensObj.timestamp</code> from the current time. Then compare the <code>expire_time</code> with the access token expiration time <code>tokensObj.tokens.expires_in</code>.</p>
<p>If the <code>expire_time</code> is less than the access token expiration time, it means that the access token is still valid, so we return the <code>tokensObj.tokens.access_token</code>.</p>
<p>If the <code>expire_time</code> is greater than the access token expiration time, it means that the access token has expired. So we move on to compare the <code>expire_time</code> with the refresh token expiration time.</p>
<p>If  the <code>expire_time</code> is less than the refresh token expiration time, it means that the  refresh token is still valid so we can use it to request for a new access token. In this case, we redefine the <code>body</code> with the <code>grant_type</code> value is &quot;refresh_token&quot;, and the <code>refresh_token</code> value is the actual refresh token read from the local file. Then we proceed to call the post request as discussed in the previous step.</p>
<p>If the <code>tokens_file</code> does not exist, we proceed the authentication as discussed in the previous step.</p>
</div><div data-title="GET request implementation" data-file="../ringcentral.js" data-highlight="80-109" class="step"><h3 id="get-request-implementation">GET request implementation</h3>
<p>Now we implement the <code>get()</code> function to handle HTTP GET requests:</p>
<p>1) Call the <code>authenticate()</code> function to handle the authentication and get the access token.</p>
<p>2) Specify the <code>url</code> variable and assign the platform server URL we defined in the configuration .env-[environment] file.</p>
<p>3) Create a query string from the <code>params</code> and append it to the <code>endpoint</code>.</p>
<p>4) Define the <code>headers</code> variable with the &quot;Accept&quot; and &quot;Authorization&quot; key/value pairs with the &quot;Authorization&quot; scheme is &quot;Bearer&quot; followed by the access token.</p>
<p>5) Define the <code>options</code> object and specify values for the <code>host</code>, <code>path</code>, <code>method</code> and the <code>headers</code>.</p>
<p>6) Call the <code>https.get</code> function to send the request to RingCentral platform.</p>
<p>7) Read the response and check the <code>status_code</code>. If the <code>status_code</code> is 200, return the response.</p>
</div><div data-title="POST request implementation" data-file="../ringcentral.js" data-highlight="110-143" class="step"><h3 id="post-request-implementation">POST request implementation</h3>
<p>Now we implement the <code>post()</code> function to handle HTTP POST requests</p>
<p>1) Call the <code>authenticate()</code> function to handle the authentication and get the access token.</p>
<p>2) Specify the <code>url</code> variable and assign the platform server URL we defined in the configuration .env-[environment] file.</p>
<p>3) Define the <code>body</code> variable and set the params as its value.</p>
<p>4) Define the <code>headers</code> variable with the &quot;Content-Type&quot;, &quot;Accept&quot; and &quot;Authorization&quot; key/value pairs  with the &quot;Authorization&quot; scheme is &quot;Bearer&quot; followed by the access token.</p>
<p>5) Call the <code>https.request</code> function to send the request to RingCentral platform.</p>
</div><div data-title="Call RingCentral platform APIs" data-file="../demo.js" class="step"><h3 id="call-ringcentral-platform-apis">Call RingCentral platform APIs</h3>
<p>Now let&#39;s create a <code>demo.js</code> file and use the <code>RingCentral</code> class as shown in the demo code on the right-hand side.</p>
<p>In this demo, we implement 2 test functions:</p>
<p><code>get_account_extension()</code>:</p>
<p>We use the <code>get</code> function from the RingCentral class to get account extensions&#39; information and print them out on the console.</p>
<p><code>send_sms()</code>:</p>
<p>We use the <code>post</code> function from the RingCentral class to send an SMS message to a <code>recipientNumber</code> and print the response out on the console.</p>
<h3 id="run-the-demo-app-">Run the demo app.</h3>
<pre><code>$ node demo.js
</code></pre><p>You can further develop the RingCentral class to add PUT and DELETE methods as you wish.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="../README.md" data-mode="markdown">IyMjIE92ZXJ2aWV3CkhvdyB0byBhdXRoZW50aWNhdGUgYW5kIGFjY2VzcyBSaW5nQ2VudHJhbCBwbGF0Zm9ybSBzZXJ2aWNlcyB1c2luZyBOb2RlIEpTLgoKIyMjIFJpbmdDZW50cmFsIFBsYXRmb3JtClJpbmdDZW50cmFsIFBsYXRmb3JtIGlzIGEgcmljaCBSRVNUZnVsIEFQSSBwbGF0Zm9ybSB3aXRoIG1vcmUgdGhhbiA2MCBBUElzIGZvciBidXNpbmVzcyBjb21tdW5pY2F0aW9uIGluY2x1ZGVzIGFkdmFuY2VkIHZvaWNlIGNhbGxzLCBjaGF0IG1lc3NhZ2luZywgU01TL01NUyBhbmQgRmF4LgoKCiMjIyBDbG9uZSBhbmQgU2V0dXAgdGhlIHByb2plY3QKYGBgCiQgZ2l0IGNsb25lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaW5nY2VudHJhbC10dXRvcmlhbHMvY2FsbC1yaW5nY2VudHJhbC1hcGlzLW5hdGl2ZS1ub2RlanMtZGVtbwoKJCBjZCBjYWxsLXJpbmdjZW50cmFsLWFwaXMtbmF0aXZlLW5vZGVqcy1kZW1vCgokIG5wbSBpbnN0YWxsIC0tc2F2ZQoKJCBjcCBlbnZpcm9ubWVudC9kb3RlbnYtc2FuZGJveCBlbnZpcm9ubWVudC8uZW52LXNhbmRib3gKCiQgY3AgZW52aXJvbm1lbnQvZG90ZW52LXByb2R1Y3Rpb24gZW52aXJvbm1lbnQvLmVudi1wcm9kdWN0aW9uCgpgYGAKCiMjIyBDcmVhdGUgYW4gYXBwCgoqIENyZWF0ZSBhbiBhcHBsaWNhdGlvbiBhdCBbUmluZ0NlbnRyYWwgRGV2ZWxvcGVyIFBvcnRhbF0oaHR0cHM6Ly9kZXZlbG9wZXIucmluZ2NlbnRyYWwuY29tKS4KKiBTZWxlY3QgYFNlcnZlci1vbmx5IChObyBVSSlgIGZvciB0aGUgUGxhdGZvcm0gdHlwZS4KKiBBZGQgdGhlIGBSZWFkQWNjb3VudHNgIGFuZCBgU01TYCBwZXJtaXNzaW9ucyBmb3IgdGhlIGFwcC4KKiBDb3B5IHRoZSBDbGllbnQgaWQgYW5kIENsaWVudCBzZWNyZXQgYW5kIGFkZCB0aGVtIHRvIHRoZSBgLmVudi1bZW52aXJvbm1lbnRdYCBmaWxlLgpgYGAKUkNfQ0xJRU5UX0lEPQpSQ19DTElFTlRfU0VDUkVUPQpgYGAKKiBBZGQgdGhlIGFjY291bnQgbG9naW4gY3JlZGVudGlhbHMgdG8gdGhlIGAuZW52LVtlbnZpcm9ubWVudF1gIGZpbGUuCmBgYApSQ19VU0VSTkFNRT0KUkNfUEFTU1dPUkQ9ClJDX0VYVEVOU0lPTj0KYGBgCklmIHlvdSBkb24ndCBrbm93IGhvdyB0byBjcmVhdGUgYSBSaW5nQ2VudHJhbCBhcHAuIENsaWNrIFtodHRwczovL2RldmVsb3Blci5yaW5nY2VudHJhbC5jb20vbGlicmFyeS9nZXR0aW5nLXN0YXJ0ZWQuaHRtbF0oaGVyZSkgZm9yIGluc3RydWN0aW9ucy4KCiMjIyBSdW4gdGhlIGRlbW8KU2V0IGBFTlZJUk9OTUVOVD1zYW5kYm94YCBpbiB0aGUgYC5lbnZgIGZpbGUgdG8gcnVuIGluIHRoZSBzYW5kYm94IGVudmlyb25tZW50LgoKU2V0IGBFTlZJUk9OTUVOVD1wcm9kdWN0aW9uYCBpbiB0aGUgYC5lbnZgIGZpbGUgdG8gcnVuIGluIHRoZSBwcm9kdWN0aW9uIGVudmlyb25tZW50LgoKYGBgCiQgbm9kZSBkZW1vLmpzCmBgYAoKIyMjIFJpbmdDZW50cmFsIERldmVsb3BlciBQb3J0YWwKVG8gc2V0dXAgYSBmcmVlIGRldmVsb3BlciBhY2NvdW50LCBjbGljayBbaGVyZV0oaHR0cHM6Ly9kZXZlbG9wZXIvcmluZ2NlbnRyYWwuY29tKQo=</textarea>
<textarea class="saurus-file" data-file="../environment/dotenv-sandbox" data-mode="text">UkNfU0VSVkVSX1VSTD1odHRwczovL3BsYXRmb3JtLmRldnRlc3QucmluZ2NlbnRyYWwuY29tClJDX0NMSUVOVF9JRD0KUkNfQ0xJRU5UX1NFQ1JFVD0KUkNfVVNFUk5BTUU9ClJDX1BBU1NXT1JEPQpSQ19FWFRFTlNJT049ClJDX1JFRElSRUNUX1VSTD0K</textarea>
<textarea class="saurus-file" data-file="../ringcentral.js" data-mode="javascript">dmFyIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKQp2YXIgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpCnZhciBmcyA9IHJlcXVpcmUoJ2ZzJykKcmVxdWlyZSgnZG90ZW52JykubG9hZCgpCgppZiAocHJvY2Vzcy5lbnYuRU5WSVJPTk1FTlQgPT0gInNhbmRib3giKSB7CiAgcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKHtwYXRoOiAiLi9lbnZpcm9ubWVudC8uZW52LXNhbmRib3gifSk7CiAgdmFyIHRva2Vuc19maWxlID0gInRva2Vuc19zYi50eHQiCn0gZWxzZSB7CiAgcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKHtwYXRoOiAiLi9lbnZpcm9ubWVudC8uZW52LXByb2R1Y3Rpb24ifSk7CiAgdmFyIHRva2Vuc19maWxlID0gInRva2Vuc19wZC50eHQiCn0KCmZ1bmN0aW9uIFJpbmdDZW50cmFsKCkge30KZXhwb3J0cy5SaW5nQ2VudHJhbCA9IFJpbmdDZW50cmFsCgpSaW5nQ2VudHJhbC5wcm90b3R5cGUgPSB7CiAgICBhdXRoZW50aWNhdGU6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGVuZHBvaW50ID0gJy9yZXN0YXBpL29hdXRoL3Rva2VuJwogICAgICAgIHZhciB1cmwgPSBwcm9jZXNzLmVudi5SQ19TRVJWRVJfVVJMCiAgICAgICAgdmFyIGJhc2ljID0gcHJvY2Vzcy5lbnYuUkNfQ0xJRU5UX0lEICsgIjoiICsgcHJvY2Vzcy5lbnYuUkNfQ0xJRU5UX1NFQ1JFVDsKICAgICAgICB2YXIgaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnLAogICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCYXNpYyAnICsgQnVmZmVyLmZyb20oYmFzaWMpLnRvU3RyaW5nKCdiYXNlNjQnKQogICAgICAgICAgICB9OwogICAgICAgIHZhciBib2R5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAnZ3JhbnRfdHlwZScgOiAncGFzc3dvcmQnLAogICAgICAgICAgICAgICd1c2VybmFtZScgOiBlbmNvZGVVUklDb21wb25lbnQocHJvY2Vzcy5lbnYuUkNfVVNFUk5BTUUpLAogICAgICAgICAgICAgICdwYXNzd29yZCcgOiBwcm9jZXNzLmVudi5SQ19QQVNTV09SRAogICAgICAgICAgICB9KTsKICAgICAgICB2YXIgb3B0aW9ucyA9IHtob3N0OiB1cmwsIHBhdGg6IGVuZHBvaW50LCBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogaGVhZGVyc307CgogICAgICAgIGlmIChmcy5leGlzdHNTeW5jKHRva2Vuc19maWxlKSkgewogICAgICAgICAgdmFyIHNhdmVkX3Rva2VucyA9IGZzLnJlYWRGaWxlU3luYyh0b2tlbnNfZmlsZSwgJ3V0ZjgnKTsKICAgICAgICAgIHZhciB0b2tlbnNPYmogPSBKU09OLnBhcnNlKHNhdmVkX3Rva2VucykKICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKQogICAgICAgICAgdmFyIGV4cGlyZV90aW1lID0gKGRhdGUuZ2V0VGltZSgpIC8gMTAwMCkgLSB0b2tlbnNPYmoudGltZXN0YW1wCiAgICAgICAgICBpZiAoZXhwaXJlX3RpbWUgPCB0b2tlbnNPYmoudG9rZW5zLmV4cGlyZXNfaW4pewogICAgICAgICAgICBjb25zb2xlLmxvZygiYWNjZXNzIHRva2VuIGlzIHN0aWxsIHZhbGlkIikKICAgICAgICAgICAgcmV0dXJuIChjYWxsYmFjayA9PSBudWxsKSA/IHRva2Vuc09iai50b2tlbnMuYWNjZXNzX3Rva2VuIDogY2FsbGJhY2sobnVsbCwgdG9rZW5zT2JqLnRva2Vucy5hY2Nlc3NfdG9rZW4pCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgaWYgKGV4cGlyZV90aW1lIDwgdG9rZW5zT2JqLnRva2Vucy5yZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW4pewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZWZyZXNoX3Rva2VuIG5vdCBleHBpcmVkIikKICAgICAgICAgICAgICBib2R5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgJ2dyYW50X3R5cGUnIDogJ3JlZnJlc2hfdG9rZW4nLAogICAgICAgICAgICAgICAgICAncmVmcmVzaF90b2tlbicgOiB0b2tlbnNPYmoudG9rZW5zLnJlZnJlc2hfdG9rZW4KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHBvc3RfcmVxID0gaHR0cHMucmVxdWVzdChvcHRpb25zLCBmdW5jdGlvbihyZXMpIHsKICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gIiIKICAgICAgICAgICAgcmVzLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7CiAgICAgICAgICAgICAgICByZXNwb25zZSArPSBjaHVuawogICAgICAgICAgICB9KS5vbigiZW5kIiwgZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PSAyMDApewogICAgICAgICAgICAgICAgICAgIHZhciBqc29uT2JqID0gSlNPTi5wYXJzZShyZXNwb25zZSkKICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW5zT2JqID0gewogICAgICAgICAgICAgICAgICAgICAgJ3Rva2VucycgOiBqc29uT2JqLAogICAgICAgICAgICAgICAgICAgICAgJ3RpbWVzdGFtcCcgOiB0aW1lc3RhbXAgLyAxMDAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZzLndyaXRlRmlsZSh0b2tlbnNfZmlsZSwgSlNPTi5zdHJpbmdpZnkodG9rZW5zT2JqKSwgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZihlcnIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIHJldHVybiAoY2FsbGJhY2sgPT0gbnVsbCkgPyBqc29uT2JqLmFjY2Vzc190b2tlbiA6IGNhbGxiYWNrKG51bGwsIGpzb25PYmouYWNjZXNzX3Rva2VuKQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjYWxsYmFjayA9PSBudWxsKSA/IHJlc3BvbnNlIDogY2FsbGJhY2socmVzcG9uc2UsIG51bGwpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiAoY2FsbGJhY2sgPT0gbnVsbCkgPyBlIDogY2FsbGJhY2soZSwgbnVsbCkKICAgICAgICB9KTsKICAgICAgICBwb3N0X3JlcS53cml0ZShib2R5KTsKICAgICAgICBwb3N0X3JlcS5lbmQoKTsKICAgIH0sCiAgICBnZXQ6IGZ1bmN0aW9uKGVuZHBvaW50LCBwYXJhbXM9bnVsbCwgY2FsbGJhY2s9bnVsbCkgewogICAgICAgIHRoaXMuYXV0aGVudGljYXRlKGZ1bmN0aW9uKGVyciwgYWNjZXNzX3Rva2VuKXsKICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICB2YXIgdXJsID0gcHJvY2Vzcy5lbnYuUkNfU0VSVkVSX1VSTAogICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gewogICAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc190b2tlbgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHBhcmFtcyAhPSBudWxsKQogICAgICAgICAgICAgICAgICBlbmRwb2ludCArPSAiPyIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkocGFyYW1zKQoKICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtob3N0OiB1cmwsIHBhdGg6IGVuZHBvaW50LCBtZXRob2Q6ICdHRVQnLCBoZWFkZXJzOiBoZWFkZXJzfTsKCiAgICAgICAgICAgICAgdmFyIGdldF9yZXEgPSBodHRwcy5nZXQob3B0aW9ucywgZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gIiIKICAgICAgICAgICAgICAgICAgICByZXMub24oJ2RhdGEnLCBmdW5jdGlvbiAoY2h1bmspIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgKz0gY2h1bmsKICAgICAgICAgICAgICAgICAgICB9KS5vbigiZW5kIiwgZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoY2FsbGJhY2sgPT0gbnVsbCkgPyByZXNwb25zZSA6IGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGNhbGxiYWNrID09IG51bGwpID8gcmVzcG9uc2UgOiBjYWxsYmFjayhyZXNwb25zZSwgbnVsbCkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGNhbGxiYWNrID09IG51bGwpID8gZSA6IGNhbGxiYWNrKGUsIG51bGwpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfWVsc2UKICAgICAgICAgICAgICAgIHJldHVybiAoY2FsbGJhY2sgPT0gbnVsbCkgPyBlcnIgOiBjYWxsYmFjayhlcnIsIG51bGwpCiAgICAgICAgfSkKICAgIH0sCiAgICBwb3N0OiBmdW5jdGlvbihlbmRwb2ludCwgcGFyYW1zPW51bGwsIGNhbGxiYWNrPW51bGwpIHsKICAgICAgICB0aGlzLmF1dGhlbnRpY2F0ZShmdW5jdGlvbihlcnIsIGFjY2Vzc190b2tlbil7CiAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICB2YXIgdXJsID0gcHJvY2Vzcy5lbnYuUkNfU0VSVkVSX1VSTAogICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzX3Rva2VuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGJvZHkgPSAiIgogICAgICAgICAgICAgICAgaWYgKHBhcmFtcyAhPSBudWxsKXsKICAgICAgICAgICAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkocGFyYW1zKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7aG9zdDogdXJsLCBwYXRoOiBlbmRwb2ludCwgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IGhlYWRlcnN9OwoKICAgICAgICAgICAgICAgIHZhciBwb3N0X3JlcSA9IGh0dHBzLnJlcXVlc3Qob3B0aW9ucywgZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gIiIKICAgICAgICAgICAgICAgICAgICByZXMub24oJ2RhdGEnLCBmdW5jdGlvbiAoY2h1bmspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSArPSBjaHVuawogICAgICAgICAgICAgICAgICAgIH0pLm9uKCJlbmQiLCBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjYWxsYmFjayA9PSBudWxsKSA/IHJlc3BvbnNlIDogY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoY2FsbGJhY2sgPT0gbnVsbCkgPyByZXNwb25zZSA6IGNhbGxiYWNrKHJlc3BvbnNlLCBudWxsKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KS5vbignZXJyb3InLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjYWxsYmFjayA9PSBudWxsKSA/IGUgOiBjYWxsYmFjayhlLCBudWxsKQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICBwb3N0X3JlcS53cml0ZShib2R5KTsKICAgICAgICAgICAgICAgICAgcG9zdF9yZXEuZW5kKCk7CiAgICAgICAgICAgIH1lbHNlCiAgICAgICAgICAgICAgICByZXR1cm4gKGNhbGxiYWNrID09IG51bGwpID8gZXJyIDogY2FsbGJhY2soZXJyLCBudWxsKQogICAgICAgIH0pCiAgICB9Cn0K</textarea>
<textarea class="saurus-file" data-file="../demo.js" data-mode="javascript">Y29uc3QgcmluZ2NlbnRyYWwgPSByZXF1aXJlKCcuL3JpbmdjZW50cmFsJykKCnZhciByYyA9IG5ldyByaW5nY2VudHJhbC5SaW5nQ2VudHJhbCgpCgpmdW5jdGlvbiBnZXRfYWNjb3VudF9leHRlbnNpb24oKXsKICAgIHZhciBlbmRwb2ludCA9ICIvcmVzdGFwaS92MS4wL2FjY291bnQvfi9leHRlbnNpb24iOwogICAgcGFyYW1zID0geydzdGF0dXMnOidFbmFibGVkJ30KICAgIHJjLmdldChlbmRwb2ludCwgcGFyYW1zLCBmdW5jdGlvbihlcnIsIHJlc3BvbnNlKXsKICAgICAgICBpZiAoZXJyKQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBqc29uT2JqID0gSlNPTi5wYXJzZShyZXNwb25zZSkKICAgICAgICAgICAgY29uc29sZS5sb2coanNvbk9iaikKICAgICAgICB9CiAgICB9KQp9CgpmdW5jdGlvbiBzZW5kX3NtcyhyZWNpcGllbnROdW1iZXIsIG1lc3NhZ2UpewogICAgdmFyIGVuZHBvaW50ID0gIi9yZXN0YXBpL3YxLjAvYWNjb3VudC9+L2V4dGVuc2lvbi9+L3NtcyI7CiAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgJ2Zyb20nOiB7ICdwaG9uZU51bWJlcicgOiBwcm9jZXNzLmVudi5SQ19VU0VSTkFNRSB9LAogICAgICAgICAgJ3RvJyA6W3sgJ3Bob25lTnVtYmVyJzogcmVjaXBpZW50TnVtYmVyIH1dLAogICAgICAgICAgJ3RleHQnOiBtZXNzYWdlCiAgICAgICAgICB9CgogICAgcmMucG9zdChlbmRwb2ludCwgcGFyYW1zLCBmdW5jdGlvbihlcnIsIHJlc3BvbnNlKXsKICAgICAgICBpZiAoZXJyKXsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgdmFyIGpzb25PYmogPSBKU09OLnBhcnNlKHJlc3BvbnNlKQogICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uT2JqKQogICAgICAgIH0KICAgIH0pCn0KCmdldF9hY2NvdW50X2V4dGVuc2lvbigpCnNlbmRfc21zKCdyZWNpcGllbnROdW1iZXInLCAiSGVsbG8gV29ybGQhIikK</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><div class="saurus-file-actions"><a href="https://github.com/https://github.com/ringcentral-tutorials/call-ringcentral-apis-native-nodejs-demo" target="_blank" class="explorer-get-code"><i class="fa fa-lg fa-github-square"></i>View Code on GitHub</a><a href="https://github.com/https://github.com/ringcentral-tutorials/call-ringcentral-apis-native-nodejs-demo/archive/master.zip" target="_blank" class="explorer-get-code"><i class="fa fa-lg icon-download"></i>Download Source Code</a></div></div></div></div><footer><div class="footer-content"><div class="footer-content-row layout-2-cols"><div class="footer-content-row-left"><div class="footer-logo"><a href="http://www.ringcentral.com"><span>Back to the main site</span></a></div></div><div class="footer-content-row-right"><ul class="footer-text-links"><li><a href="http://www.ringcentral.com/legal.html" target="_blank"><span>Legal</span></a></li><li><a href="http://www.ringcentral.com/security-statement.html" target="_blank"><span>Security Policy</span></a></li><li><a href="http://www.ringcentral.com/legal/privacy-policy.html" target="_blank"><span>Privacy Policy</span></a></li><li><a ng-href="https://devcommunity.ringcentral.com" target="_blank" href="https://devcommunity.ringcentral.com"><span>Community</span></a></li><li><a href="https://medium.com/ringcentral-developers" target="_blank"><span>Blog</span></a></li></ul></div></div><div class="footer-content-row footer-content-row-last layout-2-cols"><div class="footer-content-row-left"><span class="footer-copyright">© 1999-<span ng-bind="::main.nowObj|date:'yyyy'" class="footer-copyright-to ng-binding">2017</span> RingCentral, Inc. All rights reserved.</span></div><div class="footer-content-row-right"><div class="footer-image-links"><div class="footer-image-link footer-image-link-facebook"><a target="_blank" href="http://www.facebook.com/ringcentral"><i class="fa icon-facebook"></i></a></div><div class="footer-image-link footer-image-link-twitter"><a target="_blank" href="http://twitter.com/ringcentraldevs"><i class="fa icon-twitter"></i></a></div><div class="footer-image-link footer-image-link-google-plus"><a target="_blank" href="https://www.google.com/+ringcentral"><i class="fa icon-google_plus"></i></a></div><div class="footer-image-link footer-image-link-linkedin"><a target="_blank" href="http://www.linkedin.com/company/ringcentral"><i class="fa icon-linkedin"></i></a></div><div class="footer-image-link footer-image-link-youtube"><a target="_blank" href="http://www.youtube.com/ringcentral"><i class="fa icon-youtube"></i></a></div></div></div></div></div></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script><script>window.tutorialName="Access RingCentral platform services using Node JS.";</script><script src="viewsaurus.js"></script></body></html>